<!-- <script>
async function predict() {
  const city = document.getElementById("city").value;
  const date = document.getElementById("startDate").value;
  const days = document.getElementById("days").value;

  document.getElementById("status").innerHTML = "⏳ Fetching predictions...";
  try {
    const res = await fetch("/predict", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ city, start_date: date, days })
    });
    const data = await res.json();

    if (data.error) throw new Error(data.error);

    let html = `
      <h2 class="text-2xl font-semibold mb-2">🌡️ ${data.city} - ${days} Day Forecast</h2>
      <table class="mx-auto text-left border-collapse mt-4">
        <thead>
          <tr class="bg-orange-200">
            <th class="px-4 py-2">Date</th>
            <th class="px-4 py-2">Probability</th>
            <th class="px-4 py-2">Prediction</th>
            <th class="px-4 py-2">Risk Level</th>
          </tr>
        </thead>
        <tbody>
    `;
    data.results.forEach(r => {
      html += `
        <tr class="border-b">
          <td class="px-4 py-2">${r.DATE}</td>
          <td class="px-4 py-2">${(r.Heatwave_Prob * 100).toFixed(1)}%</td>
          <td class="px-4 py-2">${r.Heatwave_Pred === 1 ? "🔥 Yes" : "❄️ No"}</td>
          <td class="px-4 py-2 font-semibold">${r.Risk_Level}</td>
        </tr>
      `;
    });
    html += "</tbody></table>";
    document.getElementById("status").innerHTML = html;
  } catch (err) {
    document.getElementById("status").innerHTML = "❌ Error: " + err.message;
  }
}
</script> -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>☀️ AI Heatwave Forecast</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="min-h-screen flex flex-col items-center justify-start pt-12">

  <h1 class="text-4xl font-extrabold text-gray-800 flex items-center gap-2">
    ☀️ AI Heatwave Forecast
  </h1>
  <p class="text-gray-700 mt-2 mb-8">15-Year NASA Data • Seasonal + Lags • Threshold: 40°C</p>

  <div class="glass p-6 w-11/12 md:w-3/4 lg:w-2/3 flex flex-wrap gap-4 justify-center items-center">
    <div>
      <label class="block font-semibold mb-1">Select City</label>
      <select id="city" class="p-2 border rounded-md w-48">
        <option>Delhi</option>
        <option>Mumbai</option>
        <option>Kolkata</option>
        <option>Chennai</option>
        <option>Bangalore</option>
        <option>Chandigarh</option>
      </select>
    </div>

    <div>
      <label class="block font-semibold mb-1">Start Date (Optional)</label>
      <input id="startDate" type="date" class="p-2 border rounded-md w-48" />
    </div>

    <div>
      <label class="block font-semibold mb-1">Days</label>
      <input id="days" type="number" value="7" min="1" max="15" class="p-2 border rounded-md w-32" />
    </div>

    <button onclick="predict()" class="btn px-6 py-2 rounded-md flex items-center gap-2">
      📈 Predict
    </button>
  </div>

  <div id="output" class="glass p-8 mt-8 w-11/12 md:w-3/4 lg:w-2/3 text-center text-gray-700">
    <p class="text-lg" id="status">Ready to Predict Heatwaves 🌡️<br>Choose city, date & click Predict.</p>
  </div>

  <script src="{{ url_for('static', filename='main.js') }}" defer></script>
</body>
</html>

